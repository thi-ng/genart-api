/**
 * Generated by @thi.ng/wasm-api-bindgen at 2024-11-11T10:06:25.811Z
 * DO NOT EDIT!
 */

// @ts-ignore possibly includes unused imports
import { defType, Pointer, WasmStringPtr, type IWasmMemoryAccess, type MemorySlice, type MemoryView, type WasmTypeBase } from "@thi.ng/wasm-api";
// @ts-ignore
import { __array, __instanceArray, __slice32, __primslice32 } from "@thi.ng/wasm-api/memory";

// @ts-ignore possibly unused
const __str = (mem: IWasmMemoryAccess, base: number, isConst = true) => new WasmStringPtr(mem, base, isConst);

export interface Param extends WasmTypeBase {
	readonly type: WasmStringPtr;
	readonly id: WasmStringPtr;
	readonly name: WasmStringPtr;
	readonly desc: WasmStringPtr;
	readonly doc: WasmStringPtr;
	readonly update: UpdateBehavior;
	readonly body: ParamBody;
}

// @ts-ignore possibly unused args
export const $Param = defType<Param>(8, 64, (mem, base) => {
	let $type: WasmStringPtr, $id: WasmStringPtr, $name: WasmStringPtr, $desc: WasmStringPtr, $doc: WasmStringPtr;
	return {
		get type(): WasmStringPtr {
			return $type || ($type = __str(mem, base));
		},
		get id(): WasmStringPtr {
			return $id || ($id = __str(mem, (base + 4)));
		},
		get name(): WasmStringPtr {
			return $name || ($name = __str(mem, (base + 8)));
		},
		get desc(): WasmStringPtr {
			return $desc || ($desc = __str(mem, (base + 12)));
		},
		get doc(): WasmStringPtr {
			return $doc || ($doc = __str(mem, (base + 16)));
		},
		get update(): UpdateBehavior {
			return mem.u8[(base + 20)];
		},
		get body(): ParamBody {
			return $ParamBody(mem).instance((base + 24));
		},
	};
});

export interface ParamBody extends WasmTypeBase {
	readonly choice: ChoiceParam;
	readonly color: ColorParam;
	readonly range: RangeParam;
}

// @ts-ignore possibly unused args
export const $ParamBody = defType<ParamBody>(8, 40, (mem, base) => {
	return {
		get choice(): ChoiceParam {
			return $ChoiceParam(mem).instance(base);
		},
		get color(): ColorParam {
			return $ColorParam(mem).instance(base);
		},
		get range(): RangeParam {
			return $RangeParam(mem).instance(base);
		},
	};
});

export enum UpdateBehavior {
	event,
	reload,
}

export interface ChoiceParam extends WasmTypeBase {
	readonly default: WasmStringPtr;
	/**
	 * In Zig, use `genart.options()` to wrap
	 */
	readonly options: Option[];
	
	asParam(parent: Param): ReturnType<typeof $genart.params.choice>;
	
}

// @ts-ignore possibly unused args
export const $ChoiceParam = defType<ChoiceParam>(4, 12, (mem, base) => {
	let $default: WasmStringPtr;
	return {
		get default(): WasmStringPtr {
			return $default || ($default = __str(mem, base));
		},
		get options(): Option[] {
			return __slice32(mem, $Option, (base + 4));
		},
		
		asParam(parent: Param) {
			return $genart.params.choice<string>({
				name: parent.name.deref(),
				desc: parent.desc.deref(),
				doc: parent.doc.deref() || undefined,
				update: <any>UpdateBehavior[parent.update],
				default: this.default.deref() || undefined,
				options: this.options.map((x) => x.label.addr ? [x.value.deref(), x.label.deref()]: x.value.deref()),
			});
		}
		
	};
});

export interface Option extends WasmTypeBase {
	readonly value: WasmStringPtr;
	readonly label: WasmStringPtr;
}

// @ts-ignore possibly unused args
export const $Option = defType<Option>(4, 8, (mem, base) => {
	let $value: WasmStringPtr, $label: WasmStringPtr;
	return {
		get value(): WasmStringPtr {
			return $value || ($value = __str(mem, base));
		},
		get label(): WasmStringPtr {
			return $label || ($label = __str(mem, (base + 4)));
		},
	};
});

export interface ColorParam extends WasmTypeBase {
	readonly default: WasmStringPtr;
	
	asParam(parent: Param): ReturnType<typeof $genart.params.color>;
	
}

// @ts-ignore possibly unused args
export const $ColorParam = defType<ColorParam>(4, 4, (mem, base) => {
	let $default: WasmStringPtr;
	return {
		get default(): WasmStringPtr {
			return $default || ($default = __str(mem, base));
		},
		
		asParam(parent: Param) {
			return $genart.params.color({
				name: parent.name.deref(),
				desc: parent.desc.deref(),
				doc: parent.doc.deref() || undefined,
				update: <any>UpdateBehavior[parent.update],
				default: this.default.deref() || undefined,
			});
		}
		
	};
});

export interface RangeParam extends WasmTypeBase {
	/**
	 * Zig type: `f64`
	 */
	readonly default: number;
	/**
	 * Zig type: `f64`
	 */
	readonly min: number;
	/**
	 * Zig type: `f64`
	 */
	readonly max: number;
	/**
	 * Zig type: `f64`
	 */
	readonly step: number;
	/**
	 * Zig type: `f64`
	 */
	readonly exponent: number;
	
	asParam(parent: Param): ReturnType<typeof $genart.params.range>;
	
}

// @ts-ignore possibly unused args
export const $RangeParam = defType<RangeParam>(8, 40, (mem, base) => {
	return {
		get default(): number {
			return mem.f64[base >>> 3];
		},
		get min(): number {
			return mem.f64[(base + 8) >>> 3];
		},
		get max(): number {
			return mem.f64[(base + 16) >>> 3];
		},
		get step(): number {
			return mem.f64[(base + 24) >>> 3];
		},
		get exponent(): number {
			return mem.f64[(base + 32) >>> 3];
		},
		
		asParam(parent: Param) {
			return $genart.params.range({
				name: parent.name.deref(),
				desc: parent.desc.deref(),
				doc: parent.doc.deref() || undefined,
				update: <any>UpdateBehavior[parent.update],
				default: isFinite(this.default) ? this.default : undefined,
				min: this.min,
				max: this.max,
				step: this.step,
				exponent: this.exponent,
			});
		}
		
	};
});
